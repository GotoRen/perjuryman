# perjuryman

## Usage
```
### RootCAとサーバ証明書を準備
> server
$ make create/certificate/server

### クライアント証明書を準備
> client
$ make create/certificate/client
```

## Certificates and Keys
| 鍵の種類 | 説明 |
| :--- | :--- |
| `ca.pem` | ルート証明書（RSA公開鍵証明書） |
| `ca_private_key.pem` | ルート証明書のRSA秘密鍵 |
| `server.pem` | サーバ証明書（RSA公開鍵証明書） |
| `server.key` | サーバ証明書のRSA秘密鍵 |
| `client.pem` | クライアント証明書（RSA公開鍵証明書） |
| `client_private.key` | クライアント証明書のRSA秘密鍵 |

## アルゴリズム
- 1. 各証明書の発行手順
  - ルート認証局を構築
  - ルート証明書（公開鍵証明書）を発行（オレオレ証明書）=> ルート認証局が保持
  - ルート証明書をサーバとクライアントに付与
  - サーバ証明書（公開鍵証明書）をルート認証局の秘密鍵で署名して発行 => サーバに付与
  - クライアント証明書（公開鍵証明書）をルート認証局の秘密鍵で署名して発行 => クライアントに付与
- 2. TLS通信のフロー
  - クライアントはサーバに対してリクエストを送信
    - サーバはルート証明書を用いてクライアント証明書（公開鍵証明書）を検証
    - クライアントはルート証明書を用いてサーバ証明書（公開鍵証明書）を検証
  - それぞれが検証された場合、TLSコネクションを確立
